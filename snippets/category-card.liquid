{% comment %}
  Category Card Snippet
  Usage: {% render 'category-card', category: category_data %}

  category object should contain:
  - image: category image
  - title: category name
  - link: category URL
  - text_position: text positioning
{% endcomment %}

{% assign text_position_classes = 'absolute text-white font-bold text-lg z-10' %}

{% case category.text_position %}
  {% when 'bottom-left' %}
    {% assign text_position_classes = text_position_classes | append: ' bottom-4 left-4' %}
  {% when 'bottom-center' %}
    {% assign text_position_classes = text_position_classes
      | append: ' bottom-4 left-1/2 transform -translate-x-1/2 text-center'
    %}
  {% when 'bottom-right' %}
    {% assign text_position_classes = text_position_classes | append: ' bottom-4 right-4 text-right' %}
  {% when 'center' %}
    {% assign text_position_classes = text_position_classes
      | append: ' top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-center'
    %}
  {% else %}
    {% assign text_position_classes = text_position_classes | append: ' bottom-4 left-4' %}
{% endcase %}

{% if category.link %}
  <a href="{{ category.link }}" class="category-card block relative overflow-hidden aspect-[3/4] group">
{% else %}
  <div class="category-card  relative overflow-hidden aspect-[3/4]">
{% endif %}

{% if category.image %}
  {{
    category.image
    | image_url: width: 400
    | image_tag:
      class: 'w-full h-full object-cover transition-transform duration-300 group-hover:scale-105',
      alt: category.title,
      loading: 'lazy'
  }}
{% else %}
  <div class="w-full h-full bg-gray-200 flex items-center justify-center">
    <span class="text-gray-400 text-sm">No image</span>
  </div>
{% endif %}

<!-- Gradient overlay for better text readability -->
<div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"></div>

{% if category.title %}
  <div class="{{ text_position_classes }}">
    {{ category.title }}
  </div>
{% endif %}

{% if category.link %}
  </a>
{% else %}
  </div>
{% endif %}

<style>
  .category-card {
    transition: transform 0.3s ease;
  }

  .category-card:hover {
    transform: translateY(-2px);
  }

  .category-card img {
    transition: transform 0.3s ease;
  }

  .category-card:hover img {
    transform: scale(1.05);
  }
</style>
