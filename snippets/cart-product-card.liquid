{% comment %}
  Cart Product Card Snippet
  Features:
  - Compact design for cart drawer
  - Quantity controls
  - Remove button
  - Product image, title, variant, price
  - Stock availability indicator
{% endcomment %}

<div class="cart-product-card flex gap-4 p-4 border border-gray-200 bg-white">
  <!-- Product Image -->
  <div class="flex-shrink-0">
    <img
      :src="item.image"
      :alt="item.product_title"
      class="w-20 h-20 object-cover rounded-md"
      width="80"
      height="80"
      loading="lazy"
    >
  </div>

  <!-- Product Details -->
  <div class="flex-1 min-w-0">
    <!-- Product Title and Tag -->
    <div class="flex items-start justify-between mb-1">
      <h3 class="font-semibold text-gray-900 text-sm leading-tight truncate" x-text="item.product_title"></h3>
      <span
        class="bg-amber-100 text-amber-800 text-xs px-2 py-1 rounded font-bold ml-2 flex-shrink-0"
        x-show="item.product_tags && item.product_tags.includes('nuevo')"
      >
        NUEVO
      </span>
    </div>

    <!-- Variant Details -->
    <p class="text-gray-600 text-sm mb-2" x-text="item.variant_title || ''"></p>

    <!-- Rating -->
    <div class="flex items-center gap-1 mb-2">
      <div class="flex text-yellow-400">
        <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24">
          <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
        </svg>
        <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24">
          <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
        </svg>
        <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24">
          <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
        </svg>
        <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24">
          <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
        </svg>
        <svg class="w-3 h-3" fill="#e5e7eb" viewBox="0 0 24 24">
          <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
        </svg>
      </div>
      <span class="text-xs text-gray-500">(0)</span>
    </div>

    <!-- Stock Availability -->
    <p class="text-red-600 text-xs font-medium mb-2">Ultimas unidades disponibles</p>

    <!-- Price -->
    <div class="flex items-center justify-between">
      <div class="flex items-center space-x-2">
        <span class="font-bold text-gray-900 text-sm" x-text="'$' + formatMoney(item.final_line_price)"></span>
        <span
          class="text-xs text-gray-500 line-through"
          x-show="item.original_line_price && item.original_line_price > item.final_line_price"
          x-text="'$' + formatMoney(item.original_line_price)"
        ></span>
      </div>

      <!-- Quantity Controls -->
      <div class="flex items-center gap-2">
        <button
          @click="updateQuantity(item.key, item.quantity - 1)"
          :disabled="loading || item.quantity <= 1"
          class="w-6 h-6 flex items-center justify-center border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
        >
          <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path>
          </svg>
        </button>

        <span class="text-sm font-medium w-8 text-center" x-text="item.quantity"></span>

        <button
          @click="updateQuantity(item.key, item.quantity + 1)"
          :disabled="loading"
          class="w-6 h-6 flex items-center justify-center border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
        >
          <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Wishlist Button -->
  <button
    class="flex-shrink-0 text-gray-400 hover:text-red-500 transition-colors"
    @click="toggleWishlist(item.product_id)"
  >
    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
    </svg>
  </button>
</div>
