{% comment %}
  Trust Badges Section
  Features:
  - Responsive layout (horizontal on desktop, vertical on mobile)
  - Editable badge content (icon, title, description)
  - Optional borders/separators
  - Customizable styling
  - Flexible number of badges
{% endcomment %}

<div
  class="trust-badges-section py-12  md:px-8"
  style="background-color: {{ section.settings.background_color | default: '#f9fafb' }};"
>
  <div class="max-w-6xl mx-auto">
    <div class="trust-badges-container {% if section.settings.show_borders %}with-borders{% endif %} {% if section.blocks.size > 3 %}is-grid{% endif %}">
      {% for block in section.blocks %}
        {% case block.type %}
          {% when 'badge' %}
            <div class="trust-badge" {{ block.shopify_attributes }}>
              {% if block.settings.icon_type == 'svg' and block.settings.icon_svg != blank %}
                <div class="badge-icon mb-4">
                  {{ block.settings.icon_svg }}
                </div>
              {% elsif block.settings.icon_type == 'image' and block.settings.icon_image != blank %}
                <div class="badge-icon mb-4">
                  {{
                    block.settings.icon_image
                    | image_url: width: 48
                    | image_tag: alt: block.settings.title, loading: 'lazy'
                  }}
                </div>
              {% elsif block.settings.icon_type == 'image' and block.settings.icon_image %}
                <div class="badge-icon mb-4">
                  {{
                    block.settings.icon_image
                    | image_url: width: 48
                    | image_tag: alt: block.settings.title, loading: 'lazy'
                  }}
                </div>
              {% elsif block.settings.icon_type == 'image' %}
                <div class="badge-icon mb-4">
                  <div class="w-12 h-12 bg-gray-200 rounded flex items-center justify-center">
                    <span class="text-gray-400 text-xs">No image</span>
                  </div>
                </div>
              {% endif %}

              <h5
                class="badge-title font-bold mb-2"
                style="color: {{ section.settings.title_color | default: '#1f2937' }};"
              >
                {{ block.settings.title }}
              </h5>

              {% if block.settings.description != blank %}
                <p
                  class="badge-description body"
                  style="color: {{ section.settings.text_color | default: '#374151' }};"
                >
                  {{ block.settings.description }}
                </p>
              {% endif %}
            </div>
        {% endcase %}
      {% endfor %}
    </div>
  </div>
</div>

<style>
  .trust-badges-container {
    display: flex;
    flex-direction: column;
    gap: 2rem;
  }

  /* Two-column grid when more than 3 badges */
  .trust-badges-container.is-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    column-gap: 1rem;
    row-gap: 1.5rem;
  }

  .trust-badge {
    text-align: center;
    padding: 1.5rem;
  }

  .badge-icon {
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .badge-icon svg {
    width: 48px;
    height: 48px;
    color: {{ section.settings.icon_color | default: '#1f2937' }};
  }

  .badge-icon img {
    width: 48px !important;
    height: 48px !important;
    object-fit: contain;
    display: block;
  }

  .badge-title {
    margin-bottom: 0.5rem;
  }

  .badge-description {
    max-width: 300px;
    margin: 0 auto;
  }

  /* Desktop Layout */
  @media screen and (min-width: 1024px) {
    .trust-badges-container {
      flex-direction: row;
      gap: 0;
    }

    .trust-badge {
      flex: 1;
      text-align: center;
      padding: 2rem 1rem;
    }

    .badge-description {
      max-width: 250px;
    }

    /* Border separators for desktop (only when NOT grid) */
    .trust-badges-container.with-borders:not(.is-grid) .trust-badge:not(:last-child)::after {
      content: '';
      position: absolute;
      right: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 1px;
      height: 60%;
      background-color: {{ section.settings.border_color | default: '#e5e7eb' }};
    }

    .trust-badges-container.with-borders:not(.is-grid) .trust-badge {
      position: relative;
    }

    /* Desktop grid adjustments */
    .trust-badges-container.is-grid {
      grid-template-columns: repeat(2, minmax(0, 1fr));
      column-gap: 1.5rem;
      row-gap: 2rem;
    }
  }

  /* Mobile Layout */
  @media screen and (max-width: 1023px) {
    .trust-badges-container {
      gap: 1.5rem;
    }

    .trust-badge {
      padding: 1rem;
    }

    .badge-description {
      max-width: 100%;
    }
  }
</style>

{% schema %}
{
  "name": "Trust Badges",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "header",
      "content": "Styling Options"
    },
    {
      "type": "checkbox",
      "id": "show_borders",
      "label": "Show borders between badges",
      "default": true
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#f9fafb"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title Color",
      "default": "#1f2937"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#374151"
    },
    {
      "type": "color",
      "id": "icon_color",
      "label": "Icon Color",
      "default": "#1f2937"
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Border Color",
      "default": "#e5e7eb"
    }
  ],
  "blocks": [
    {
      "type": "badge",
      "name": "Trust Badge",
      "settings": [
        {
          "type": "select",
          "id": "icon_type",
          "label": "Icon Type",
          "options": [
            {
              "value": "svg",
              "label": "SVG Code"
            },
            {
              "value": "image",
              "label": "Upload Image"
            }
          ],
          "default": "svg",
          "info": "Choose how to add your icon"
        },
        {
          "type": "html",
          "id": "icon_svg",
          "label": "Icon SVG Code",
          "default": "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5m8.25 3v6.75m0 0l-3-3m3 3l3-3M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z\" /></svg>",
          "info": "Paste your SVG code here"
        },
        {
          "type": "image_picker",
          "id": "icon_image",
          "label": "Icon Image",
          "info": "Upload an image file (PNG, JPG, SVG)"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Free shipping"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Description",
          "default": "We offer free worldwide shipping on orders over $100"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Trust Badges",
      "category": "Content",
      "blocks": [
        {
          "type": "badge",
          "settings": {
            "title": "Free shipping",
            "description": "We offer free worldwide shipping on orders over $100"
          }
        },
        {
          "type": "badge",
          "settings": {
            "title": "Customer service",
            "description": "Our customer service team is available Monday till Friday from 9am - 6pm"
          }
        },
        {
          "type": "badge",
          "settings": {
            "title": "Secure payments",
            "description": "We offer secure payments using Creditcard, PayPal, ShopPay and Amazon Pay."
          }
        }
      ],
      "settings": {
        "show_borders": true
      }
    }
  ]
}
{% endschema %}
