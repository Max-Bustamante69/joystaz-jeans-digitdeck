{% comment %}
  Cart Trigger Button
  Features:
  - Shows cart item count
  - Opens cart drawer when clicked
  - Responsive design
{% endcomment %}

<button
  @click="$dispatch('cart:open')"
  class="relative flex items-center justify-center w-10 h-10 text-white hover:text-gray-200 transition-colors"
  x-data="
    {
      cartCount: 0,
      async updateCartCount() {
        try {
          const response = await fetch('/cart.js');
          const cart = await response.json();
          this.cartCount = cart.item_count;
        } catch (error) {
          console.error('Error updating cart count:', error);
        }
      }
    }
  "
  x-init="updateCartCount()"
  @cart:updated.window="updateCartCount()"
>
  {% render 'cart-icon', class: 'w-6 h-6' %}

  <!-- Cart Count Badge -->
  <span
    x-show="cartCount > 0"
    x-text="cartCount"
    class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold"
  ></span>
</button>
