<header
  class="flex flex-col bg-transparent absolute top-0 left-0 right-0 z-50 overflow-hidden"
  x-data="{ mobileMenuOpen: false }"
>
  <div class="w-screen overflow-hidden bg-primary py-2 whitespace-nowrap">
    <div class="ticker-wrap inline-block">
      <span class="ticker-item text-white text-md font-medium tracking-wide"
        >Class Is in Session &bull; Class Is in Session &bull; Class Is in Session &bull; Class Is in Session &bull;
        Class Is in Session &bull; Class Is in Session &bull; Class Is in Session &bull; Class Is in Session &bull;
        Class Is in Session &bull; Class Is in Session &bull;</span
      >
      <!-- Repeat the content to ensure smooth looping -->
      <span class="ticker-item text-white text-md font-medium tracking-wide"
        >Class Is in Session &bull; Class Is in Session &bull; Class Is in Session &bull; Class Is in Session &bull;
        Class Is in Session &bull; Class Is in Session &bull; Class Is in Session &bull; Class Is in Session &bull;
        Class Is in Session &bull; Class Is in Session &bull;</span
      >
    </div>
  </div>

  <nav class="grid grid-cols-3 py-8 px-6 md:px-24 bg-transparent text-white w-full bg-gradient-to-b from-black/60 to-transparent">
    <!-- Desktop Menu -->
    <div class="header__menu hidden xl:flex items-center justify-start gap-6">
      {% for link in section.settings.menu.links %}
        <p class="font-semibold">
          {{ link.title | link_to: link.url }}
        </p>
      {% endfor %}
    </div>

    <!-- Mobile Menu Button -->
    <div class="flex gap-6 items-center xl:hidden">
      <button
        @click="mobileMenuOpen = !mobileMenuOpen"
        class="text-white hover:text-gray-300 transition-colors"
        aria-label="Toggle mobile menu"
      >
        {% render 'menu-icon' %}
      </button>
      {% render 'search-icon' %}
    </div>

    <!-- Logo -->
    <h2 class="header__title flex items-center justify-center">
      <a href="{{ routes.root_url }}">
        <img src="../assets/logo.png" alt="Logo" class="invert-100" width="120" height="40">
      </a>
    </h2>

    <!-- Desktop Icons -->
    <div class="flex items-center justify-end gap-4">
      {% render 'search-icon', class: 'hidden xl:block' %}
      {% render 'heart-icon', class: 'hidden xl:block' %}
      {% render 'user-icon' %}
      <div>
        {% render 'cart-icon' %}
        {% if cart.item_count > 0 %}
          <sup>{{ cart.item_count }}</sup>
        {% endif %}
      </div>
    </div>
  </nav>

  <!-- Mobile Menu Overlay -->
  <div
    x-show="mobileMenuOpen"
    x-transition:enter="transition ease-out duration-300"
    x-transition:enter-start="opacity-0"
    x-transition:enter-end="opacity-100"
    x-transition:leave="transition ease-in duration-200"
    x-transition:leave-start="opacity-100"
    x-transition:leave-end="opacity-0"
    class="fixed inset-0 bg-black bg-opacity-50 z-40 xl:hidden"
    @click="mobileMenuOpen = false"
  ></div>

  <!-- Mobile Menu Panel -->
  <div
    x-show="mobileMenuOpen"
    x-transition:enter="transition ease-out duration-300"
    x-transition:enter-start="transform translate-x-full"
    x-transition:enter-end="transform translate-x-0"
    x-transition:leave="transition ease-in duration-200"
    x-transition:leave-start="transform translate-x-0"
    x-transition:leave-end="transform translate-x-full"
    class="fixed top-0 right-0 h-full w-80 bg-white text-black z-50 xl:hidden"
  >
    <div class="p-6">
      <div class="flex justify-between items-center mb-8">
        <h3 class="text-lg font-semibold">Menu</h3>
        <button
          @click="mobileMenuOpen = false"
          class="text-gray-500 hover:text-gray-700"
          aria-label="Close mobile menu"
        >
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>

      <nav class="space-y-4">
        {% for link in section.settings.menu.links %}
          <a
            href="{{ link.url }}"
            class="block py-2 text-gray-700 hover:text-gray-900 transition-colors"
            @click="mobileMenuOpen = false"
          >
            {{ link.title }}
          </a>
        {% endfor %}
      </nav>

      <div class="mt-8 pt-8 border-t border-gray-200">
        <div class="flex gap-4">
          {% render 'search-icon' %}
          {% render 'heart-icon' %}
          {% render 'user-icon' %}
          <div>
            {% render 'cart-icon' %}
            {% if cart.item_count > 0 %}
              <sup>{{ cart.item_count }}</sup>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>
</header>

{% stylesheet %}
  /* Ticker animation */
  .ticker-wrap {
    animation: ticker linear infinite;
    animation-duration: 40s;
    transform: translateX(0%);
  }

  @keyframes ticker {
    0% {
      transform: translateX(0%);
    }
    100% {
      transform: translateX(-50%);
    }
  }

  /* Mobile responsive ticker */
  @media (max-width: 768px) {
    .ticker-wrap {
      animation-duration: 25s;
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "t:general.header",
  "settings": [
    {
      "type": "link_list",
      "id": "menu",
      "label": "t:labels.menu"
    }
  ]
}
{% endschema %}
