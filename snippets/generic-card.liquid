{% comment %}
  Generic Card Snippet
  Usage: {% render 'generic-card', image: image_object, title: 'Title', link: 'url', video: video_object, text_position: 'bottom-left', aspect_ratio: 'portrait' %}

  Displays a card with image/video, title, and optional link
  Parameters:
  - image: Image object (optional)
  - video: Video object (optional)
  - title: String title (required)
  - link: String URL (optional)
  - text_position: 'bottom-left', 'bottom-center', 'bottom-right', 'center' (optional, default: 'bottom-left')
  - aspect_ratio: 'square', 'portrait', 'landscape', 'wide', 'ultra-wide', 'tall' (optional, default: 'portrait')
{% endcomment %}

{% assign text_position_classes = 'absolute text-white z-10' %}

{% case text_position %}
  {% when 'bottom-left' %}
    {% assign text_position_classes = text_position_classes | append: ' bottom-4 left-4' %}
  {% when 'bottom-center' %}
    {% assign text_position_classes = text_position_classes
      | append: ' bottom-4 left-1/2 transform -translate-x-1/2 text-center'
    %}
  {% when 'bottom-right' %}
    {% assign text_position_classes = text_position_classes | append: ' bottom-4 right-4 text-right' %}
  {% when 'center' %}
    {% assign text_position_classes = text_position_classes
      | append: ' top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-center'
    %}
  {% else %}
    {% assign text_position_classes = text_position_classes | append: ' bottom-4 left-4' %}
{% endcase %}

{% comment %} Set aspect ratio classes {% endcomment %}
{% assign aspect_ratio_class = 'portrait' %}
{% case aspect_ratio %}
  {% when 'square' %}
    {% assign aspect_ratio_class = 'aspect-square' %}
  {% when 'portrait' %}
    {% assign aspect_ratio_class = 'aspect-[3/4]' %}
  {% when 'landscape' %}
    {% assign aspect_ratio_class = 'aspect-[4/3]' %}
  {% when 'wide' %}
    {% assign aspect_ratio_class = 'aspect-[16/9]' %}
  {% when 'ultra-wide' %}
    {% assign aspect_ratio_class = 'aspect-[21/9]' %}
  {% when 'tall' %}
    {% assign aspect_ratio_class = 'aspect-[2/3]' %}
  {% else %}
    {% assign aspect_ratio_class = 'aspect-square' %}
{% endcase %}

{% if link %}
  <a
    href="{{ link }}"
    class="generic-card block relative {{ aspect_ratio_class }} overflow-hidden group w-[110%] md:min-w-[220px]"
  >
{% else %}
  <div class="generic-card relative overflow-hidden {{ aspect_ratio_class }} w-[110%] md:min-w-[220px]">
{% endif %}

{% if video %}
  <!-- Video Display -->
  <video
    class="w-full h-full object-cover transition-transform duration-300"
    muted
    loop
    playsinline
    preload="metadata"
    autoplay
  >
    {% if video.sources %}
      {% for source in video.sources %}
        <source src="{{ source.url | asset_url }}" type="{{ source.mime_type }}">
      {% endfor %}
    {% else %}
      <source src="{{ video | asset_url }}" type="video/mp4">
    {% endif %}
    Your browser does not support the video tag.
  </video>
{% elsif image %}
  <!-- Image Display -->
  {{
    image
    | image_url: width: 400
    | image_tag: class: 'w-full h-full object-cover transition-transform duration-300', alt: title, loading: 'lazy'
  }}
{% else %}
  <!-- Fallback -->
  <div class="w-full h-full bg-gray-200 flex items-center justify-center">
    <span class="text-gray-400 text-sm">No media</span>
  </div>
{% endif %}

<!-- Gradient overlay for better text readability -->
<div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent to-60%"></div>

{% if title %}
  <div class="{{ text_position_classes }}">
    <h3>
      {{ title }}
    </h3>
  </div>
{% endif %}

{% if link %}
  </a>
{% else %}
  </div>
{% endif %}

<style>
  .generic-card {
    transition: transform 0.3s ease;
  }

  .generic-card:hover {
    transform: translateY(-2px);
  }

  .generic-card img {
    transition: transform 0.3s ease;
  }

  .generic-card:hover img,
  .generic-card:hover video {
    transform: scale(1.05);
  }

  .generic-card video {
    transition: transform 0.3s ease;
  }
</style>

